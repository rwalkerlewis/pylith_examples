## /opt/Trelis-16.1/bin/trelis
## Trelis Version 16.1.1
## Trelis Build 1b15f60
## Revised Tue Aug 23 16:17:41 2016 -0600
## Running 08/13/2021 03:02:05 PM
## Command Options:
cd "/home/dockimble/pylith_ii/examples/Magma/Mesh"
# ----------------------------------------------------------------------
# Magma chamber at a 20 km depth in an elastic half space
# ----------------------------------------------------------------------
reset
undo off
# ----------------------------------------------------------------------
# Set units to SI
# ----------------------------------------------------------------------
${Units('si')}
# ----------------------------------------------------------------------
# Set SMB geometry parameters
# ----------------------------------------------------------------------
${SMBdepth=20.0*km}
# Choose radius of a sphere such that the total arc length across the
# magma chamber is 50 km ("major length" = 25 km) and the 
# "minor height" is 100 m (thin)
# a = 2 sqrt[ h (2*R - h) ]
# a = chord length (full distance across magma body :: to be set)
# h = half-height of magma body (from top of body to center :: to be set)
# R = radius of circle/sphere :: to be solved for
${minorLength=2*km}
${majorLength=25.0*km}
${sphereRad=156.5*km}
# Domain size parameters
${sizeX=500.0*km}
${sizeY=500.0*km}
${sizeZ=300.0*km}
#----------------------------------------------------------------------------------------
# Play journal files
#----------------------------------------------------------------------------------------
#------------------------------------------------------------------------
# Create magma chamber
#------------------------------------------------------------------------
create sphere radius {sphereRad}
# Subtract a brick from the sphere 
brick x {2*sphereRad} y {2*sphereRad} z {2*sphereRad}
move volume 2 x 0 y 0 z {-minorLength}
subtract volume 2 from volume 1
move volume 1 x 0 y 0 z {-sphereRad+minorLength}
# Create open shell
surface 9 copy
delete volume 1
# Copy and reflect, then create a new volume
surface 10 copy reflect z
create volume surface 10 11 heal
compress all
# Move to the SMB depth
volume 1 move x 0 y 0 z {-SMBdepth}
#--------------------------------------------------------------------------
# Create the domain, a single elastic block
#--------------------------------------------------------------------------
create brick x {sizeX} y {sizeY} z {sizeZ}
volume 2 move x 0 y 0 z {-0.5*sizeZ}
compress all
imprint all
merge all
#------------------------------------------------------------------------------
# Subtract the volumes to make the chamber hollow
#------------------------------------------------------------------------------
subtract body 1 from body 2 keep
delete volume 3
imprint all
merge all
compress all
#---------------------------------------------------------------------------
# Set element sizes and mesh the geometry
#---------------------------------------------------------------------------
${upperChamberSize=1.0*km}
${lowerChamberSize=3.0*km}
${faceSize=20.0*km}
# Mesh the chamber
surface 1 2 scheme triadvance
surface 1 size {upperChamberSize}
surface 2 size {lowerChamberSize}
mesh surface 1 2
# Set mesh sizes at other surfaces
surface 3 scheme trimesh
surface 3 size {faceSize}
mesh surface 3
surface 4 scheme trimesh
surface 4 size {faceSize}
mesh surface 4
surface 5 scheme trimesh
surface 5 size {faceSize}
mesh surface 5
surface 6 scheme trimesh
surface 6 size {faceSize}
mesh surface 6
surface 7 scheme trimesh
surface 7 size {faceSize}
mesh surface 7
surface 8 scheme trimesh
surface 8 size {faceSize}
mesh surface 8
# Mesh the volume
volume all scheme tetmesh
mesh volume all
# Smooth
volume all smooth scheme condition number beta 1.8 cpu 10
smooth volume all
# ----------------------------------------------------------------------------------------------
# Create Boundary Conditions
#----------------------------------------------------------------------------------------------
#Create blocks for materials
block 1 volume 1
block 1 name "chamber"
block 2 volume 2
block 2 name "elasticMedium"
imprint all
merge all
compress all
# Chamber nodesets
group "chamber_top" add node in surface 1
nodeset 1 chamber_top
nodeset 1 name "chamber_top"
group "chamber_bot" add node in surface 2
nodeset 2 chamber_bot
nodeset 2 name "chamber_bot"
# +x face nodeset
group "face_xpos" add node in surface 8
nodeset 3 face_xpos
nodeset 3 name "face_xpos"
# -x face nodeset
group "face_xneg" add node in surface 6
nodeset 4 face_xneg
nodeset 4 name "face_xneg"
# +y face nodeset
group "face_ypos" add node in surface 7
nodeset 5 face_ypos
nodeset 5 name "face_ypos"
# -y face nodeset
group "face_yneg" add node in surface 5
nodeset 6 face_yneg
nodeset 6 name "face_yneg"
# +z face nodeset
group "face_zpos" add node in surface 3
nodeset 7 face_zpos
nodeset 7 name "face_zpos"
# -z face nodeset
group "face_zneg" add node in surface 4
nodeset 8 face_zneg
nodeset 8 name "face_zneg"
#-----------------------------------------------------------------------------------------
# Export the mesh
#-----------------------------------------------------------------------------------------
export mesh "OneLayerElastic.exo" dimension 3 overwrite
# ----------------------------------------------------------------------
# Magma chamber at a 20 km depth in an elastic half space
# ----------------------------------------------------------------------
reset
undo off
# ----------------------------------------------------------------------
# Set units to SI
# ----------------------------------------------------------------------
${Units('si')}
# ----------------------------------------------------------------------
# Set SMB geometry parameters
# ----------------------------------------------------------------------
${SMBdepth=20.0*km}
# Choose radius of a sphere such that the total arc length across the
# magma chamber is 50 km ("major length" = 25 km) and the 
# "minor height" is 100 m (thin)
# a = 2 sqrt[ h (2*R - h) ]
# a = chord length (full distance across magma body :: to be set)
# h = half-height of magma body (from top of body to center :: to be set)
# R = radius of circle/sphere :: to be solved for
${minorLength=2*km}
${majorLength=25.0*km}
${sphereRad=156.5*km}
# Domain size parameters
${sizeX=500.0*km}
${sizeY=500.0*km}
${sizeZ=300.0*km}
#----------------------------------------------------------------------------------------
# Play journal files
#----------------------------------------------------------------------------------------
#------------------------------------------------------------------------
# Create magma chamber
#------------------------------------------------------------------------
create sphere radius {sphereRad}
# Subtract a brick from the sphere 
brick x {2*sphereRad} y {2*sphereRad} z {2*sphereRad}
move volume 2 x 0 y 0 z {-minorLength}
subtract volume 2 from volume 1
move volume 1 x 0 y 0 z {-sphereRad+minorLength}
# Create open shell
surface 9 copy
delete volume 1
# Copy and reflect, then create a new volume
surface 10 copy reflect z
create volume surface 10 11 heal
compress all
# Move to the SMB depth
volume 1 move x 0 y 0 z {-SMBdepth}
#--------------------------------------------------------------------------
# Create the domain, a single elastic block
#--------------------------------------------------------------------------
create brick x {sizeX} y {sizeY} z {sizeZ}
volume 2 move x 0 y 0 z {-0.5*sizeZ}
compress all
imprint all
merge all
#------------------------------------------------------------------------------
# Subtract the volumes to make the chamber hollow
#------------------------------------------------------------------------------
subtract body 1 from body 2 keep
imprint all
merge all
compress all
#---------------------------------------------------------------------------
# Set element sizes and mesh the geometry
#---------------------------------------------------------------------------
${upperChamberSize=1.0*km}
${lowerChamberSize=3.0*km}
${faceSize=20.0*km}
# Mesh the chamber
surface 1 2 scheme triadvance
surface 1 size {upperChamberSize}
surface 2 size {lowerChamberSize}
mesh surface 1 2
# Set mesh sizes at other surfaces
surface 3 scheme trimesh
surface 3 size {faceSize}
mesh surface 3
surface 4 scheme trimesh
surface 4 size {faceSize}
mesh surface 4
surface 5 scheme trimesh
surface 5 size {faceSize}
mesh surface 5
surface 6 scheme trimesh
surface 6 size {faceSize}
mesh surface 6
surface 7 scheme trimesh
surface 7 size {faceSize}
mesh surface 7
surface 8 scheme trimesh
surface 8 size {faceSize}
mesh surface 8
# Mesh the volume
volume all scheme tetmesh
mesh volume all
# Smooth
volume all smooth scheme condition number beta 1.8 cpu 10
smooth volume all
# ----------------------------------------------------------------------------------------------
# Create Boundary Conditions
#----------------------------------------------------------------------------------------------
#Create blocks for materials
block 1 volume 1
block 1 name "chamber"
block 2 volume 2
block 2 name "elasticMedium"
imprint all
merge all
compress all
# Chamber nodesets
group "chamber_top" add node in surface 1
nodeset 1 chamber_top
nodeset 1 name "chamber_top"
group "chamber_bot" add node in surface 2
nodeset 2 chamber_bot
nodeset 2 name "chamber_bot"
# +x face nodeset
group "face_xpos" add node in surface 8
nodeset 3 face_xpos
nodeset 3 name "face_xpos"
# -x face nodeset
group "face_xneg" add node in surface 6
nodeset 4 face_xneg
nodeset 4 name "face_xneg"
# +y face nodeset
group "face_ypos" add node in surface 7
nodeset 5 face_ypos
nodeset 5 name "face_ypos"
# -y face nodeset
group "face_yneg" add node in surface 5
nodeset 6 face_yneg
nodeset 6 name "face_yneg"
# +z face nodeset
group "face_zpos" add node in surface 3
nodeset 7 face_zpos
nodeset 7 name "face_zpos"
# -z face nodeset
group "face_zneg" add node in surface 4
nodeset 8 face_zneg
nodeset 8 name "face_zneg"
#-----------------------------------------------------------------------------------------
# Export the mesh
#-----------------------------------------------------------------------------------------
export mesh "OneLayerElastic.exo" dimension 3 overwrite
# ----------------------------------------------------------------------
# Magma chamber at a 20 km depth in an elastic half space
# ----------------------------------------------------------------------
reset
undo off
# ----------------------------------------------------------------------
# Set units to SI
# ----------------------------------------------------------------------
${Units('si')}
# ----------------------------------------------------------------------
# Set SMB geometry parameters
# ----------------------------------------------------------------------
${SMBdepth=20.0*km}
# Choose radius of a sphere such that the total arc length across the
# magma chamber is 50 km ("major length" = 25 km) and the 
# "minor height" is 100 m (thin)
# a = 2 sqrt[ h (2*R - h) ]
# a = chord length (full distance across magma body :: to be set)
# h = half-height of magma body (from top of body to center :: to be set)
# R = radius of circle/sphere :: to be solved for
${minorLength=2*km}
${majorLength=25.0*km}
${sphereRad=156.5*km}
# Domain size parameters
${sizeX=500.0*km}
${sizeY=500.0*km}
${sizeZ=300.0*km}
#----------------------------------------------------------------------------------------
# Play journal files
#----------------------------------------------------------------------------------------
#------------------------------------------------------------------------
# Create magma chamber
#------------------------------------------------------------------------
create sphere radius {sphereRad}
# Subtract a brick from the sphere 
brick x {2*sphereRad} y {2*sphereRad} z {2*sphereRad}
move volume 2 x 0 y 0 z {-minorLength}
subtract volume 2 from volume 1
move volume 1 x 0 y 0 z {-sphereRad+minorLength}
# Create open shell
surface 9 copy
delete volume 1
# Copy and reflect, then create a new volume
surface 10 copy reflect z
create volume surface 10 11 heal
compress all
# Move to the SMB depth
volume 1 move x 0 y 0 z {-SMBdepth}
#--------------------------------------------------------------------------
# Create the domain, a single elastic block
#--------------------------------------------------------------------------
create brick x {sizeX} y {sizeY} z {sizeZ}
volume 2 move x 0 y 0 z {-0.5*sizeZ}
compress all
imprint all
merge all
#------------------------------------------------------------------------------
# Subtract the volumes to make the chamber hollow
#------------------------------------------------------------------------------
subtract body 1 from body 2 keep
delete volume 2
imprint all
merge all
compress all
#---------------------------------------------------------------------------
# Set element sizes and mesh the geometry
#---------------------------------------------------------------------------
${upperChamberSize=1.0*km}
${lowerChamberSize=3.0*km}
${faceSize=20.0*km}
# Mesh the chamber
surface 1 2 scheme triadvance
surface 1 size {upperChamberSize}
surface 2 size {lowerChamberSize}
mesh surface 1 2
# Set mesh sizes at other surfaces
surface 3 scheme trimesh
surface 3 size {faceSize}
mesh surface 3
surface 4 scheme trimesh
surface 4 size {faceSize}
mesh surface 4
surface 5 scheme trimesh
surface 5 size {faceSize}
mesh surface 5
surface 6 scheme trimesh
surface 6 size {faceSize}
mesh surface 6
surface 7 scheme trimesh
surface 7 size {faceSize}
mesh surface 7
surface 8 scheme trimesh
surface 8 size {faceSize}
mesh surface 8
# Mesh the volume
volume all scheme tetmesh
mesh volume all
# Smooth
volume all smooth scheme condition number beta 1.8 cpu 10
smooth volume all
# ----------------------------------------------------------------------------------------------
# Create Boundary Conditions
#----------------------------------------------------------------------------------------------
#Create blocks for materials
block 1 volume 1
block 1 name "chamber"
imprint all
merge all
compress all
# Chamber nodesets
group "chamber_top" add node in surface 1
nodeset 1 chamber_top
nodeset 1 name "chamber_top"
group "chamber_bot" add node in surface 2
nodeset 2 chamber_bot
nodeset 2 name "chamber_bot"
# +x face nodeset
group "face_xpos" add node in surface 8
nodeset 3 face_xpos
nodeset 3 name "face_xpos"
# -x face nodeset
group "face_xneg" add node in surface 6
nodeset 4 face_xneg
nodeset 4 name "face_xneg"
# +y face nodeset
group "face_ypos" add node in surface 7
nodeset 5 face_ypos
nodeset 5 name "face_ypos"
# -y face nodeset
group "face_yneg" add node in surface 5
nodeset 6 face_yneg
nodeset 6 name "face_yneg"
# +z face nodeset
group "face_zpos" add node in surface 3
nodeset 7 face_zpos
nodeset 7 name "face_zpos"
# -z face nodeset
group "face_zneg" add node in surface 4
nodeset 8 face_zneg
nodeset 8 name "face_zneg"
#-----------------------------------------------------------------------------------------
# Export the mesh
#-----------------------------------------------------------------------------------------
export mesh "OneLayerElastic.exo" dimension 3 overwrite
# ----------------------------------------------------------------------
# Magma chamber at a 20 km depth in an elastic half space
# ----------------------------------------------------------------------
reset
undo off
# ----------------------------------------------------------------------
# Set units to SI
# ----------------------------------------------------------------------
${Units('si')}
# ----------------------------------------------------------------------
# Set SMB geometry parameters
# ----------------------------------------------------------------------
${SMBdepth=20.0*km}
# Choose radius of a sphere such that the total arc length across the
# magma chamber is 50 km ("major length" = 25 km) and the 
# "minor height" is 100 m (thin)
# a = 2 sqrt[ h (2*R - h) ]
# a = chord length (full distance across magma body :: to be set)
# h = half-height of magma body (from top of body to center :: to be set)
# R = radius of circle/sphere :: to be solved for
${minorLength=2*km}
${majorLength=25.0*km}
${sphereRad=156.5*km}
# Domain size parameters
${sizeX=500.0*km}
${sizeY=500.0*km}
${sizeZ=300.0*km}
#----------------------------------------------------------------------------------------
# Play journal files
#----------------------------------------------------------------------------------------
#------------------------------------------------------------------------
# Create magma chamber
#------------------------------------------------------------------------
create sphere radius {sphereRad}
# Subtract a brick from the sphere 
brick x {2*sphereRad} y {2*sphereRad} z {2*sphereRad}
move volume 2 x 0 y 0 z {-minorLength}
subtract volume 2 from volume 1
move volume 1 x 0 y 0 z {-sphereRad+minorLength}
# Create open shell
surface 9 copy
delete volume 1
# Copy and reflect, then create a new volume
surface 10 copy reflect z
create volume surface 10 11 heal
compress all
# Move to the SMB depth
volume 1 move x 0 y 0 z {-SMBdepth}
#--------------------------------------------------------------------------
# Create the domain, a single elastic block
#--------------------------------------------------------------------------
create brick x {sizeX} y {sizeY} z {sizeZ}
volume 2 move x 0 y 0 z {-0.5*sizeZ}
compress all
imprint all
merge all
#------------------------------------------------------------------------------
# Subtract the volumes to make the chamber hollow
#------------------------------------------------------------------------------
subtract body 1 from body 2 keep
imprint all
merge all
compress all
#---------------------------------------------------------------------------
# Set element sizes and mesh the geometry
#---------------------------------------------------------------------------
${upperChamberSize=1.0*km}
${lowerChamberSize=3.0*km}
${faceSize=20.0*km}
# Mesh the chamber
surface 1 2 scheme triadvance
surface 1 size {upperChamberSize}
surface 2 size {lowerChamberSize}
mesh surface 1 2
# Set mesh sizes at other surfaces
surface 3 scheme trimesh
surface 3 size {faceSize}
mesh surface 3
surface 4 scheme trimesh
surface 4 size {faceSize}
mesh surface 4
surface 5 scheme trimesh
surface 5 size {faceSize}
mesh surface 5
surface 6 scheme trimesh
surface 6 size {faceSize}
mesh surface 6
surface 7 scheme trimesh
surface 7 size {faceSize}
mesh surface 7
surface 8 scheme trimesh
surface 8 size {faceSize}
mesh surface 8
# Mesh the volume
volume all scheme tetmesh
mesh volume all
# Smooth
volume all smooth scheme condition number beta 1.8 cpu 10
smooth volume all
# ----------------------------------------------------------------------------------------------
# Create Boundary Conditions
#----------------------------------------------------------------------------------------------
#Create blocks for materials
block 1 volume 1
block 1 name "chamber"
block 2 volume 3
block 2 name "elasticMedium"
imprint all
merge all
compress all
# Chamber nodesets
group "chamber_top" add node in surface 1
nodeset 1 chamber_top
nodeset 1 name "chamber_top"
group "chamber_bot" add node in surface 2
nodeset 2 chamber_bot
nodeset 2 name "chamber_bot"
# +x face nodeset
group "face_xpos" add node in surface 8
nodeset 3 face_xpos
nodeset 3 name "face_xpos"
# -x face nodeset
group "face_xneg" add node in surface 6
nodeset 4 face_xneg
nodeset 4 name "face_xneg"
# +y face nodeset
group "face_ypos" add node in surface 7
nodeset 5 face_ypos
nodeset 5 name "face_ypos"
# -y face nodeset
group "face_yneg" add node in surface 5
nodeset 6 face_yneg
nodeset 6 name "face_yneg"
# +z face nodeset
group "face_zpos" add node in surface 3
nodeset 7 face_zpos
nodeset 7 name "face_zpos"
# -z face nodeset
group "face_zneg" add node in surface 4
nodeset 8 face_zneg
nodeset 8 name "face_zneg"
#-----------------------------------------------------------------------------------------
# Export the mesh
#-----------------------------------------------------------------------------------------
export mesh "OneLayerElastic.exo" dimension 3 overwrite
delete mesh volume 2 propagate
delete volume 2
